import{j as e,r as Fe,s as De,u as Se,v as ke,w as Ce,y as Te}from"./ui-vendor-BSQvkeI1.js";import{h as Ae,a as x}from"./react-vendor-BZLPsLKc.js";import{c as H,a as Pe,G as Y,C as W,b as S,d as me,e as xe,f as ue,g as pe,h as X,L as j,M as Be,I as k,i as Le,E as Ie,j as Ee,B as f,k as ge,l as U,p as Ve,m as ze,t as D,S as E,n as V,o as z,q as M,r as N,s as Z,u as _,v as I,w as Me,U as Re,T as be,x as R,y as qe,z as te,A as G,D as Oe,N as Ue,P as _e,F as ae,X as q,H as $e,J as He,K as re,O as ie,Q as Je,R as le,V as ne,W as oe,Y as We,Z as Ke,_ as Ye,$ as Ge,a0 as Xe,a1 as Ze,a2 as Qe,a3 as es,a4 as ss,a5 as ts,a6 as as,a7 as rs,a8 as is,a9 as ls,aa as ns,ab as os,ac as ce,ad as cs,ae as ds,af as hs,ag as ms,ah as K,ai as xs}from"./admin-XP-Eimwo.js";import"./chart-vendor-CaFuJj-w.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&t(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();var O={},de;function us(){if(de)return O;de=1;var i=Ae();return O.createRoot=i.createRoot,O.hydrateRoot=i.hydrateRoot,O}var ps=us();const gs=Pe("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Q({className:i,variant:l,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:H(gs({variant:l}),i),...s})}function ee({className:i,...l}){return e.jsx("div",{"data-slot":"alert-description",className:H("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",i),...l})}function $(){return e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-[#FFD700]/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-[#FFD700]/10 rounded-full blur-3xl animate-pulse delay-700"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-[#FFD700]/5 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,215,0,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,215,0,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"})]})}const bs={en:{title:"ISD Car Reservation",subtitle:"Professional Vehicle Booking System",loginTitle:"Welcome Back",loginDescription:"Sign in to access your account",email:"Email Address",emailPlaceholder:"you@example.com",password:"Password",passwordPlaceholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",loginButton:"Sign In",signingIn:"Signing in...",noAccount:"Don't have an account?",signUp:"Create account",error:"Error signing in. Please check your credentials.",testAccounts:"Test Accounts",admin:"Admin",employee:"Employee",driver:"Driver",forgotPassword:"Forgot password?",feature1Title:"Smart Booking System",feature1Desc:"Streamlined vehicle reservation process",feature2Title:"Real-time Updates",feature2Desc:"Instant approval notifications and status tracking",feature3Title:"Comprehensive Analytics",feature3Desc:"Advanced reporting and insights dashboard",stat1:"24/7",stat1Label:"Available",stat2:"100%",stat2Label:"Secure",stat3:"Fast",stat3Label:"Approval"},fr:{title:"RÃ©servation de Voitures ISD",subtitle:"SystÃ¨me de RÃ©servation de VÃ©hicules Professionnel",loginTitle:"Bon Retour",loginDescription:"Connectez-vous pour accÃ©der Ã  votre compte",email:"Adresse e-mail",emailPlaceholder:"vous@exemple.com",password:"Mot de passe",passwordPlaceholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",loginButton:"Se connecter",signingIn:"Connexion en cours...",noAccount:"Vous n'avez pas de compte?",signUp:"CrÃ©er un compte",error:"Erreur de connexion. Veuillez vÃ©rifier vos identifiants.",testAccounts:"Comptes de Test",admin:"Administrateur",employee:"EmployÃ©",driver:"Chauffeur",forgotPassword:"Mot de passe oubliÃ©?",feature1Title:"SystÃ¨me de rÃ©servation intelligent",feature1Desc:"Processus de rÃ©servation de vÃ©hicule simplifiÃ©",feature2Title:"Mises Ã  jour en temps rÃ©el",feature2Desc:"Notifications d'approbation instantanÃ©es et suivi de statut",feature3Title:"Analyses complÃ¨tes",feature3Desc:"Tableau de bord de rapports et d'informations avancÃ©s",stat1:"24/7",stat1Label:"Disponible",stat2:"100%",stat2Label:"SÃ©curisÃ©",stat3:"Rapide",stat3Label:"Approbation"}};function he({onLogin:i,onSwitchToSignup:l,language:s,setLanguage:t}){const a=bs[s],[c,h]=x.useState(""),[p,n]=x.useState(""),[w,m]=x.useState(!1),[y,o]=x.useState(""),[r,g]=x.useState(!1),[v,u]=x.useState(!1),F=async()=>{u(!0),o("");try{(await(await fetch(`https://${Ve}.supabase.co/functions/v1/make-server-3f59598d/seed`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ze}`}})).json()).success?D.success("Test accounts created successfully! You can now login."):D.error("Failed to create test accounts")}catch{D.error("Failed to create test accounts")}finally{u(!1)}},C=async T=>{T.preventDefault(),o(""),m(!0);try{const P=await U.login(c,p);if(!P.success){o(P.error||a.error),m(!1);return}i(P.accessToken)}catch{o(a.error),m(!1)}},b=T=>{const P={admin:{email:"admin@school.edu",password:"password123"},employee:{email:"employee@school.edu",password:"password123"},driver:{email:"driver@school.edu",password:"password123"}};h(P[T].email),n(P[T].password)};return e.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden flex items-center justify-center px-4 py-8",children:[t&&e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsxs("button",{onClick:()=>t(s==="en"?"fr":"en"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-colors backdrop-blur-sm",children:[e.jsx(Y,{className:"w-4 h-4 text-[#FFD700]"}),e.jsx("span",{className:"text-sm font-medium",children:s==="en"?"FR":"EN"})]})}),e.jsx($,{}),e.jsxs("div",{className:"w-full max-w-6xl relative z-10 grid lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"hidden lg:block space-y-8 text-white",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-2xl flex items-center justify-center shadow-2xl shadow-[#FFD700]/20",children:e.jsx("img",{src:"/images/SchoolLogo.png",alt:"ISD Logo",className:"w-10 h-10 object-contain"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FFD700] via-[#FFD700] to-white bg-clip-text text-transparent",children:a.title}),e.jsx("p",{className:"text-gray-400 mt-1",children:a.subtitle})]})]})}),e.jsxs("div",{className:"space-y-4 pt-8",children:[e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FFD700]/10 border border-[#FFD700]/20 flex items-center justify-center group-hover:bg-[#FFD700]/20 transition-colors",children:e.jsx(W,{className:"w-5 h-5 text-[#FFD700]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:a.feature1Title}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.feature1Desc})]})]}),e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FFD700]/10 border border-[#FFD700]/20 flex items-center justify-center group-hover:bg-[#FFD700]/20 transition-colors",children:e.jsx(W,{className:"w-5 h-5 text-[#FFD700]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:a.feature2Title}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.feature2Desc})]})]}),e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FFD700]/10 border border-[#FFD700]/20 flex items-center justify-center group-hover:bg-[#FFD700]/20 transition-colors",children:e.jsx(W,{className:"w-5 h-5 text-[#FFD700]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:a.feature3Title}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.feature3Desc})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8 border-t border-white/10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-[#FFD700]",children:a.stat1}),e.jsx("div",{className:"text-sm text-gray-400",children:a.stat1Label})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-[#FFD700]",children:a.stat2}),e.jsx("div",{className:"text-sm text-gray-400",children:a.stat2Label})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-[#FFD700]",children:a.stat3}),e.jsx("div",{className:"text-sm text-gray-400",children:a.stat3Label})]})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-2xl shadow-[#FFD700]/20",children:e.jsx("img",{src:"/images/SchoolLogo.png",alt:"ISD Logo",className:"w-10 h-10 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFD700] via-[#FFD700] to-white bg-clip-text text-transparent",children:a.title}),e.jsx("p",{className:"text-gray-400 mt-1 text-sm",children:a.subtitle})]}),e.jsxs(S,{className:"border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl",children:[e.jsxs(me,{className:"space-y-1 pb-4",children:[e.jsx(xe,{className:"text-white text-2xl",children:a.loginTitle}),e.jsx(ue,{className:"text-gray-400",children:a.loginDescription})]}),e.jsxs(pe,{children:[e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[y&&e.jsxs(Q,{variant:"destructive",className:"bg-red-500/10 border-red-500/50",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(ee,{children:y})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",className:"text-white text-sm font-medium",children:a.email}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(k,{id:"email",type:"email",placeholder:a.emailPlaceholder,value:c,onChange:T=>h(T.target.value),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 pl-10 h-12 focus:border-[#FFD700] focus:ring-[#FFD700]/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{htmlFor:"password",className:"text-white text-sm font-medium",children:a.password}),e.jsx("button",{type:"button",className:"text-xs text-[#FFD700] hover:underline",children:a.forgotPassword})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(k,{id:"password",type:r?"text":"password",placeholder:a.passwordPlaceholder,value:p,onChange:T=>n(T.target.value),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 pl-10 pr-10 h-12 focus:border-[#FFD700] focus:ring-[#FFD700]/20"}),e.jsx("button",{type:"button",onClick:()=>g(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:r?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(Ee,{className:"h-4 w-4"})})]})]}),e.jsx(f,{type:"submit",className:"w-full bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 h-12 font-semibold shadow-lg shadow-[#FFD700]/20 transition-all hover:shadow-xl hover:shadow-[#FFD700]/30",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),a.signingIn]}):a.loginButton}),e.jsxs("div",{className:"text-center pt-2",children:[e.jsxs("span",{className:"text-gray-400 text-sm",children:[a.noAccount," "]}),e.jsx("button",{type:"button",onClick:l,className:"text-[#FFD700] hover:underline text-sm font-medium",children:a.signUp})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-3 text-center",children:a.testAccounts}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b("admin"),className:"px-3 py-2 text-xs rounded-lg bg-[#FFD700]/10 border border-[#FFD700]/30 text-[#FFD700] hover:bg-[#FFD700]/20 transition-colors",children:a.admin}),e.jsx("button",{type:"button",onClick:()=>b("employee"),className:"px-3 py-2 text-xs rounded-lg bg-[#FFD700]/10 border border-[#FFD700]/30 text-[#FFD700] hover:bg-[#FFD700]/20 transition-colors",children:a.employee}),e.jsx("button",{type:"button",onClick:()=>b("driver"),className:"px-3 py-2 text-xs rounded-lg bg-[#FFD700]/10 border border-[#FFD700]/30 text-[#FFD700] hover:bg-[#FFD700]/20 transition-colors",children:a.driver})]}),e.jsx("button",{type:"button",onClick:F,disabled:v,className:"mt-3 w-full px-3 py-2 text-xs rounded-lg bg-green-500/10 border border-green-500/30 text-green-400 hover:bg-green-500/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Creating Test Accounts...":"ðŸŒ± Seed Test Accounts"})]})]})]}),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-6",children:"Â© 2024 ISD Car Reservation. All rights reserved."})]})]})]})}const vs={en:{title:"ISD Car Reservation",signupTitle:"Create Account",signupDescription:"Sign up for a new account",name:"Full Name",namePlaceholder:"John Doe",email:"Email Address",emailPlaceholder:"you@example.com",password:"Password",passwordPlaceholder:"At least 6 characters",phone:"Phone Number",phonePlaceholder:"+1234567890",department:"Department",departmentPlaceholder:"Select your department",role:"Role",signupButton:"Create Account",signingUp:"Creating account...",haveAccount:"Already have an account?",signIn:"Sign in",error:"Error creating account. Please try again.",employee:"Employee",admin:"Administrator",driver:"Driver"},fr:{title:"RÃ©servation de Voitures ISD",signupTitle:"CrÃ©er un compte",signupDescription:"Inscrivez-vous pour un nouveau compte",name:"Nom complet",namePlaceholder:"Jean Dupont",email:"Adresse e-mail",emailPlaceholder:"vous@exemple.com",password:"Mot de passe",passwordPlaceholder:"Au moins 6 caractÃ¨res",phone:"NumÃ©ro de tÃ©lÃ©phone",phonePlaceholder:"+1234567890",department:"DÃ©partement",departmentPlaceholder:"SÃ©lectionnez votre dÃ©partement",role:"RÃ´le",signupButton:"CrÃ©er un compte",signingUp:"CrÃ©ation du compte...",haveAccount:"Vous avez dÃ©jÃ  un compte?",signIn:"Se connecter",error:"Erreur lors de la crÃ©ation du compte. Veuillez rÃ©essayer.",employee:"EmployÃ©",admin:"Administrateur",driver:"Conducteur"}},fs=["Administration","Teaching","Maintenance","IT","Security","Transportation"];function ws({onSignup:i,onSwitchToLogin:l,language:s}){const t=vs[s],[a,c]=x.useState({name:"",email:"",password:"",phone:"",department:"",role:"employee"}),[h,p]=x.useState(!1),[n,w]=x.useState(""),m=(o,r)=>{c(g=>({...g,[o]:r}))},y=async o=>{o.preventDefault(),w(""),p(!0);try{const r=await U.signup(a);if(!r.success){w(r.error||t.error),p(!1);return}i(r.accessToken)}catch{w(t.error),p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center px-4 py-8 relative overflow-hidden",children:[e.jsx($,{}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-2xl shadow-[#FFD700]/20",children:e.jsx("img",{src:"/images/SchoolLogo.png",alt:"ISD Logo",className:"w-12 h-12 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent",children:t.title})]}),e.jsxs(S,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-white text-2xl",children:t.signupTitle}),e.jsx(ue,{className:"text-gray-400",children:t.signupDescription})]}),e.jsx(pe,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n&&e.jsxs(Q,{variant:"destructive",className:"bg-red-500/20 border border-red-500/30",children:[e.jsx(X,{className:"h-4 w-4 text-red-400"}),e.jsx(ee,{className:"text-red-300",children:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name",className:"text-white",children:t.name}),e.jsx(k,{id:"name",type:"text",placeholder:t.namePlaceholder,value:a.name,onChange:o=>m("name",o.target.value),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",className:"text-white",children:t.email}),e.jsx(k,{id:"email",type:"email",placeholder:t.emailPlaceholder,value:a.email,onChange:o=>m("email",o.target.value),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",className:"text-white",children:t.password}),e.jsx(k,{id:"password",type:"password",placeholder:t.passwordPlaceholder,value:a.password,onChange:o=>m("password",o.target.value),required:!0,minLength:6,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"phone",className:"text-white",children:t.phone}),e.jsx(k,{id:"phone",type:"tel",placeholder:t.phonePlaceholder,value:a.phone,onChange:o=>m("phone",o.target.value),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"department",className:"text-white",children:t.department}),e.jsxs(E,{value:a.department,onValueChange:o=>m("department",o),children:[e.jsx(V,{className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]",children:e.jsx(z,{placeholder:t.departmentPlaceholder})}),e.jsx(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:fs.map(o=>e.jsx(N,{value:o,className:"text-white hover:bg-white/10",children:o},o))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"role",className:"text-white",children:t.role}),e.jsxs(E,{value:a.role,onValueChange:o=>m("role",o),children:[e.jsx(V,{className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]",children:e.jsx(z,{})}),e.jsxs(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(N,{value:"employee",className:"text-white hover:bg-white/10",children:t.employee}),e.jsx(N,{value:"admin",className:"text-white hover:bg-white/10",children:t.admin}),e.jsx(N,{value:"driver",className:"text-white hover:bg-white/10",children:t.driver})]})]})]}),e.jsx(f,{type:"submit",className:"w-full bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 h-12 shadow-lg shadow-[#FFD700]/20",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),t.signingUp]}):t.signupButton}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsxs("span",{className:"text-gray-400",children:[t.haveAccount," "]}),e.jsx("button",{type:"button",onClick:l,className:"text-[#FFD700] hover:underline font-semibold",children:t.signIn})]})]})})]})]})]})}const js={en:{title:"New Booking Request",subtitle:"Fill out the form below to request a vehicle",tripDetails:"Trip Details",date:"Date",time:"Departure Time",destination:"Destination",destinationPlaceholder:"Enter destination address",passengers:"Number of Passengers",vehicleType:"Vehicle Type",purpose:"Purpose",otherPurpose:"Please specify purpose",selectVehicle:"Select Vehicle Type",sedan:"Sedan (4 passengers)",suv:"SUV (7 passengers)",minibus:"Minibus (15 passengers)",bus:"Bus (30 passengers)",fieldTrip:"Field Trip",meeting:"Meeting",competition:"Competition",training:"Training",other:"Other",capacityWarning:"Passenger count exceeds vehicle capacity!",submit:"Submit Booking Request",success:"Booking request submitted successfully!",pleaseSelect:"Please select a vehicle type",confirmationTitle:"Booking Confirmation",confirmationSubtitle:"Please review your booking details",dateLabel:"Date:",timeLabel:"Time:",destinationLabel:"Destination:",passengersLabel:"Passengers:",vehicleLabel:"Vehicle:",purposeLabel:"Purpose:",backToEdit:"Back to Edit",confirmBooking:"Confirm Booking",pastDateError:"Cannot book a trip for a past date",failedToCreate:"Failed to create booking"},fr:{title:"Nouvelle demande de rÃ©servation",subtitle:"Remplissez le formulaire ci-dessous pour demander un vÃ©hicule",tripDetails:"DÃ©tails du voyage",date:"Date",time:"Heure de dÃ©part",destination:"Destination",destinationPlaceholder:"Entrez l'adresse de destination",passengers:"Nombre de passagers",vehicleType:"Type de vÃ©hicule",purpose:"Objectif",otherPurpose:"Veuillez prÃ©ciser l'objectif",selectVehicle:"SÃ©lectionner le type de vÃ©hicule",sedan:"Berline (4 passagers)",suv:"SUV (7 passagers)",minibus:"Minibus (15 passagers)",bus:"Bus (30 passagers)",fieldTrip:"Sortie Ã©ducative",meeting:"RÃ©union",competition:"CompÃ©tition",training:"Formation",other:"Autre",capacityWarning:"Le nombre de passagers dÃ©passe la capacitÃ© du vÃ©hicule!",submit:"Soumettre la demande de rÃ©servation",success:"Demande de rÃ©servation soumise avec succÃ¨s!",pleaseSelect:"Veuillez sÃ©lectionner un type de vÃ©hicule",confirmationTitle:"Confirmation de rÃ©servation",confirmationSubtitle:"Veuillez vÃ©rifier les dÃ©tails de votre rÃ©servation",dateLabel:"Date :",timeLabel:"Heure :",destinationLabel:"Destination :",passengersLabel:"Passagers :",vehicleLabel:"VÃ©hicule :",purposeLabel:"Objectif :",backToEdit:"Retour Ã  la modification",confirmBooking:"Confirmer la rÃ©servation",pastDateError:"Impossible de rÃ©server un voyage pour une date passÃ©e",failedToCreate:"Ã‰chec de la crÃ©ation de la rÃ©servation"}},Ns={Sedan:4,SUV:7,Minibus:15,Bus:30};function ys({user:i,language:l}){const s=js[l],[t,a]=x.useState({date:"",time:"",destination:"",passengers:"",vehicleType:"",purpose:"",otherPurpose:""}),[c,h]=x.useState(!1),[p,n]=x.useState({}),[w,m]=x.useState({}),y=parseInt(t.passengers)||0,o=t.vehicleType?Ns[t.vehicleType]:0,r=t.vehicleType&&y>o,g=u=>{if(u.preventDefault(),!t.vehicleType){D.error(s.pleaseSelect);return}const F=new Date(t.date),C=new Date;if(C.setHours(0,0,0,0),F<C){D.error(s.pastDateError);return}r||h(!0)},v=async()=>{const u={userId:i?.id||"user:1",employeeName:i?.name||"Current User",department:i?.department||"Department",email:i?.email||"user@school.edu",phone:i?.phone||"+1-555-0000",date:t.date,time:t.time,destination:t.destination,passengers:parseInt(t.passengers),vehicleType:t.vehicleType,purpose:t.purpose==="Other"?t.otherPurpose:t.purpose,otherPurpose:t.purpose==="Other"?t.otherPurpose:""};(await R.create(u)).success?(D.success(s.success),a({date:"",time:"",destination:"",passengers:"",vehicleType:"",purpose:"",otherPurpose:""}),h(!1)):D.error(s.failedToCreate)};return c?e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsx("div",{className:"container mx-auto max-w-2xl",children:e.jsx(S,{className:"p-8 border border-green-500/30 bg-white/5 backdrop-blur-xl shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-6 h-20 w-20 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(Z,{className:"h-12 w-12 text-green-500"})}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-green-500 to-white bg-clip-text text-transparent mb-2",children:s.confirmationTitle}),e.jsx("p",{className:"text-gray-400 mb-6",children:s.confirmationSubtitle}),e.jsxs("div",{className:"text-left space-y-4 mb-8 bg-white/5 p-6 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3",children:[e.jsx("span",{className:"text-gray-400",children:s.dateLabel}),e.jsx("span",{className:"text-white font-medium",children:t.date})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3",children:[e.jsx("span",{className:"text-gray-400",children:s.timeLabel}),e.jsx("span",{className:"text-white font-medium",children:t.time})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3",children:[e.jsx("span",{className:"text-gray-400",children:s.destinationLabel}),e.jsx("span",{className:"text-white font-medium",children:t.destination})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3",children:[e.jsx("span",{className:"text-gray-400",children:s.passengersLabel}),e.jsx("span",{className:"text-white font-medium",children:t.passengers})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-3",children:[e.jsx("span",{className:"text-gray-400",children:s.vehicleLabel}),e.jsx("span",{className:"text-white font-medium",children:t.vehicleType})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:s.purposeLabel}),e.jsx("span",{className:"text-white font-medium",children:t.purpose==="Other"?t.otherPurpose:t.purpose})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{onClick:()=>h(!1),variant:"outline",className:"flex-1 border-white/20 bg-white/5 text-white hover:bg-white/10",children:s.backToEdit}),e.jsx(f,{onClick:v,className:"flex-1 bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 shadow-lg shadow-[#FFD700]/20",children:s.confirmBooking})]})]})})})}):e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-3xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent mb-2",children:s.title}),e.jsx("p",{className:"text-gray-400",children:s.subtitle})]}),e.jsx(S,{className:"p-8 border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl",children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"h-6 w-6 text-[#FFD700]"}),s.tripDetails]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"date",className:"text-white",children:s.date}),e.jsx(k,{id:"date",type:"date",value:t.date,onChange:u=>a({...t,date:u.target.value}),min:new Date().toISOString().split("T")[0],required:!0,className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"time",className:"text-white",children:s.time}),e.jsx(k,{id:"time",type:"time",value:t.time,onChange:u=>a({...t,time:u.target.value}),required:!0,className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]"})]})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"destination",className:"text-white flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-[#FFD700]"}),s.destination]}),e.jsx(k,{id:"destination",value:t.destination,onChange:u=>a({...t,destination:u.target.value}),placeholder:s.destinationPlaceholder,required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"vehicleType",className:"text-white flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-[#FFD700]"}),s.vehicleType]}),e.jsxs(E,{value:t.vehicleType,onValueChange:u=>a({...t,vehicleType:u}),required:!0,children:[e.jsx(V,{className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]",children:e.jsx(z,{placeholder:s.selectVehicle})}),e.jsxs(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(N,{value:"Sedan",className:"text-white hover:bg-white/10",children:s.sedan}),e.jsx(N,{value:"SUV",className:"text-white hover:bg-white/10",children:s.suv}),e.jsx(N,{value:"Minibus",className:"text-white hover:bg-white/10",children:s.minibus}),e.jsx(N,{value:"Bus",className:"text-white hover:bg-white/10",children:s.bus})]})]}),t.vehicleType&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Maximum capacity: ",o," passengers"]})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"passengers",className:"text-white flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-[#FFD700]"}),s.passengers]}),e.jsx(k,{id:"passengers",type:"number",min:"1",value:t.passengers,onChange:u=>a({...t,passengers:u.target.value}),required:!0,className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]"})]}),r&&e.jsxs(Q,{variant:"destructive",className:"bg-red-500/20 border border-red-500/30 backdrop-blur-xl",children:[e.jsx(X,{className:"h-5 w-5 text-red-400"}),e.jsx(ee,{className:"text-red-300",children:s.capacityWarning})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"purpose",className:"text-white",children:s.purpose}),e.jsxs(E,{value:t.purpose,onValueChange:u=>a({...t,purpose:u}),required:!0,children:[e.jsx(V,{className:"bg-white/10 border-white/20 text-white focus:border-[#FFD700]",children:e.jsx(z,{placeholder:s.purpose})}),e.jsxs(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(N,{value:"Field Trip",className:"text-white hover:bg-white/10",children:s.fieldTrip}),e.jsx(N,{value:"Meeting",className:"text-white hover:bg-white/10",children:s.meeting}),e.jsx(N,{value:"Competition",className:"text-white hover:bg-white/10",children:s.competition}),e.jsx(N,{value:"Training",className:"text-white hover:bg-white/10",children:s.training}),e.jsx(N,{value:"Other",className:"text-white hover:bg-white/10",children:s.other})]})]})]}),t.purpose==="Other"&&e.jsxs("div",{children:[e.jsx(j,{htmlFor:"otherPurpose",className:"text-white",children:s.otherPurpose}),e.jsx(be,{id:"otherPurpose",value:t.otherPurpose,onChange:u=>a({...t,otherPurpose:u.target.value}),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]",rows:3})]}),e.jsx(f,{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 h-14 shadow-lg shadow-[#FFD700]/20 disabled:opacity-50 disabled:cursor-not-allowed",children:s.submit})]})})]})})}const Fs={en:{title:"Driver Dashboard",subtitle:"Manage your daily trips and deliveries",todayTrips:"Today's Trips",upcoming:"Upcoming",inProgress:"In Progress",completed:"Completed",pickup:"Pickup",dropoff:"Drop-off",scheduledTime:"Scheduled Time",passengers:"Passengers",requestedBy:"Requested by",startTrip:"Start Trip",completeTrip:"Complete Trip",navigate:"Navigate",call:"Call",tripStarted:"Trip started",tripCompleted:"Trip completed successfully",noTrips:"No trips scheduled",emptyTitle:"No trips scheduled today",emptyDescription:"When trips are assigned to you, they will appear here. Check back later or contact dispatch.",failedToStart:"Failed to start trip",failedToComplete:"Failed to complete trip",openingNavigation:"Opening navigation to"},fr:{title:"Tableau de bord du conducteur",subtitle:"GÃ©rez vos trajets et livraisons quotidiennes",todayTrips:"Voyages d'aujourd'hui",upcoming:"Ã€ venir",inProgress:"En cours",completed:"TerminÃ©",pickup:"Ramassage",dropoff:"DÃ©pose",scheduledTime:"Heure prÃ©vue",passengers:"Passagers",requestedBy:"DemandÃ© par",startTrip:"Commencer le voyage",completeTrip:"Terminer le voyage",navigate:"Naviguer",call:"Appeler",tripStarted:"Voyage commencÃ©",tripCompleted:"Voyage terminÃ© avec succÃ¨s",noTrips:"Aucun voyage prÃ©vu",emptyTitle:"Aucun voyage prÃ©vu aujourd'hui",emptyDescription:"Lorsque des voyages vous sont attribuÃ©s, ils apparaÃ®tront ici. Revenez plus tard ou contactez la rÃ©partition.",failedToStart:"Ã‰chec du dÃ©marrage du voyage",failedToComplete:"Ã‰chec de la fin du voyage",openingNavigation:"Ouverture de la navigation vers"}};function Ds({language:i}){const l=Fs[i],{trips:s,loading:t,refetch:a}=qe(),c=async r=>{const g=r.replace("booking:","");(await ae.updateTripStatus(g,"in-progress")).success?(D.success(l.tripStarted),a()):D.error(l.failedToStart)},h=async r=>{const g=r.replace("booking:","");(await ae.updateTripStatus(g,"completed")).success?(D.success(l.tripCompleted),a()):D.error(l.failedToComplete)},p=r=>{D.info(`${l.openingNavigation} ${r}`)};if(t)return e.jsx("div",{className:"min-h-screen py-4 md:py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"h-10 w-48 bg-white/10 rounded-lg animate-pulse mb-2"}),e.jsx("div",{className:"h-5 w-64 bg-white/5 rounded animate-pulse"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(te,{}),e.jsx(te,{})]})]})});const n=s.map((r,g)=>({id:r.id,requestor:r.employeeName||"Unknown",phone:r.phone||"",pickupLocation:"School Campus",destination:r.destination,scheduledTime:r.time,passengers:r.passengers,status:r.tripStatus||"upcoming",order:g})),w=n.filter(r=>r.status==="upcoming").sort((r,g)=>r.order-g.order),m=n.filter(r=>r.status==="in-progress"),y=n.filter(r=>r.status==="completed");if(n.length===0)return e.jsx("div",{className:"min-h-screen py-4 md:py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent mb-2",children:l.title}),e.jsx("p",{className:"text-gray-400",children:l.subtitle})]}),e.jsx(S,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg",children:e.jsx(G,{icon:I,title:l.emptyTitle,description:l.emptyDescription})})]})});const o=({trip:r})=>e.jsxs(S,{className:"p-5 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:r.requestor}),e.jsxs("p",{className:"text-gray-400 flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),r.scheduledTime]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${r.status==="upcoming"?"bg-[#FFD700]/20 text-[#FFD700] border border-[#FFD700]/30":r.status==="in-progress"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"}`,children:r.status==="upcoming"?l.upcoming:r.status==="in-progress"?l.inProgress:l.completed})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-8 mb-4 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FFD700]/10 to-transparent"}),e.jsx("div",{className:"flex items-center justify-center text-gray-400 relative z-10",children:e.jsx(I,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-center text-gray-400 mt-2 text-sm relative z-10",children:"Map View"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 bg-green-500/10 p-3 rounded-lg border border-green-500/20",children:[e.jsx(I,{className:"h-5 w-5 text-green-400 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-green-400",children:l.pickup}),e.jsx("p",{className:"text-white font-medium",children:r.pickupLocation})]})]}),e.jsxs("div",{className:"flex items-start gap-3 bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:[e.jsx(I,{className:"h-5 w-5 text-red-400 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-400",children:l.dropoff}),e.jsx("p",{className:"text-white font-medium",children:r.destination})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-300 bg-white/5 p-3 rounded-lg border border-white/10",children:[e.jsxs("span",{children:[l.passengers,": ",e.jsx("span",{className:"text-white font-semibold",children:r.passengers})]}),e.jsx("span",{className:"text-gray-500",children:"â€¢"}),e.jsx("span",{className:"text-gray-400",children:r.requestor})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs(f,{onClick:()=>p(r.destination),variant:"outline",className:"flex-1 border border-[#FFD700]/30 bg-[#FFD700]/10 text-[#FFD700] hover:bg-[#FFD700]/20",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),l.navigate]}),e.jsxs(f,{onClick:()=>window.open(`tel:${r.phone}`),variant:"outline",className:"flex-1 border border-white/20 bg-white/5 text-white hover:bg-white/10",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),l.call]})]}),r.status==="upcoming"&&e.jsx(f,{onClick:()=>c(r.id),className:"w-full bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 h-12 shadow-lg shadow-[#FFD700]/20",children:l.startTrip}),r.status==="in-progress"&&e.jsxs(f,{onClick:()=>h(r.id),className:"w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white h-12 shadow-lg shadow-green-500/20",children:[e.jsx(Z,{className:"h-5 w-5 mr-2"}),l.completeTrip]})]});return e.jsx("div",{className:"min-h-screen py-4 md:py-8 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent mb-2",children:l.title}),e.jsx("p",{className:"text-gray-400",children:l.subtitle})]}),m.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-500 animate-pulse shadow-lg shadow-blue-500/50"}),l.inProgress]}),e.jsx("div",{className:"space-y-4",children:m.map(r=>e.jsx(o,{trip:r},r.id))})]}),w.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:l.upcoming}),e.jsx("div",{className:"space-y-4",children:w.map((r,g)=>e.jsxs("div",{className:"relative",children:[g===0&&e.jsx("div",{className:"absolute -left-2 top-0 bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black px-3 py-1 rounded-full text-sm font-semibold z-10 shadow-lg",children:"Next"}),e.jsx(o,{trip:r})]},r.id))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:l.completed}),e.jsx("div",{className:"space-y-4 opacity-50",children:y.map(r=>e.jsx(o,{trip:r},r.id))})]})]})})}function Ss({value:i,onChange:l,placeholder:s="Select date range"}){const[t,a]=x.useState(!1),c=n=>n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",h=n=>{n.stopPropagation(),l({from:"",to:""}),a(!1)},p=i.from||i.to;return t?e.jsx(S,{className:"w-full md:w-auto p-4 bg-black/95 backdrop-blur-xl border-white/10",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(j,{className:"text-white",children:"Date Range"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"from-date",className:"text-sm text-gray-400 mb-1 block",children:"From Date"}),e.jsx(k,{id:"from-date",type:"date",value:i.from,onChange:n=>l({...i,from:n.target.value}),className:"bg-white/10 border-white/20 text-white"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"to-date",className:"text-sm text-gray-400 mb-1 block",children:"To Date"}),e.jsx(k,{id:"to-date",type:"date",value:i.to,onChange:n=>l({...i,to:n.target.value}),min:i.from,className:"bg-white/10 border-white/20 text-white"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{l({from:"",to:""}),a(!1)},className:"flex-1 border-white/20 bg-white/5 text-white hover:bg-white/10",children:"Clear"}),e.jsx(f,{size:"sm",onClick:()=>a(!1),className:"flex-1 bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90",children:"Apply"})]})]})}):e.jsxs(f,{variant:"outline",onClick:()=>a(!0),className:`w-full md:w-auto justify-between text-left font-normal bg-white/10 border-white/20 text-white hover:bg-white/20 ${!p&&"text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-[#FFD700]"}),p?e.jsxs("span",{children:[i.from&&c(i.from),i.from&&i.to&&" - ",i.to&&c(i.to)]}):e.jsx("span",{children:s})]}),p&&e.jsx(q,{className:"h-4 w-4 ml-2 text-gray-400 hover:text-white",onClick:h})]})}const ks={en:{title:"My Bookings",noBookings:"No bookings found",dateTime:"Date & Time",destination:"Destination",passengers:"Passengers",vehicle:"Vehicle",status:"Status",pending:"Pending",approved:"Approved",denied:"Denied",cancelled:"Cancelled",cancel:"Cancel Booking",edit:"Modify Booking",cancelled_msg:"Booking cancelled successfully",cannotModify:"Cannot modify approved bookings",editBooking:"Edit Booking",saveChanges:"Save Changes",cancelDialog:"Cancel",date:"Date",time:"Time",numPassengers:"Number of Passengers",vehicleType:"Vehicle Type",purpose:"Purpose",updated_msg:"Booking updated successfully",cancelConfirmTitle:"Cancel Booking?",cancelConfirmDesc:"Are you sure you want to cancel this booking? This action cannot be undone.",confirmCancel:"Yes, Cancel Booking",searchPlaceholder:"Search bookings...",filterByStatus:"Filter by status",allStatuses:"All Statuses",totalBookings:"Total Bookings",actions:"Actions",export:"Export Bookings",emptyTitle:"No bookings yet",emptyDescription:"You haven't made any booking requests yet. Create your first booking to get started.",emptyAction:"Create Booking",selectAll:"Select All",deselectAll:"Deselect All",selected:"selected",bulkCancel:"Cancel Selected",bulkExport:"Export Selected",cancelling:"Cancelling...",failedToCancel:"Failed to cancel booking",failedToCancelSome:"Failed to cancel some bookings",failedToUpdate:"Failed to update booking"},fr:{title:"Mes rÃ©servations",noBookings:"Aucune rÃ©servation trouvÃ©e",dateTime:"Date et heure",destination:"Destination",passengers:"Passagers",vehicle:"VÃ©hicule",status:"Statut",pending:"En attente",approved:"ApprouvÃ©",denied:"RefusÃ©",cancelled:"AnnulÃ©",cancel:"Annuler la rÃ©servation",edit:"Modifier la rÃ©servation",cancelled_msg:"RÃ©servation annulÃ©e avec succÃ¨s",cannotModify:"Impossible de modifier les rÃ©servations approuvÃ©es",editBooking:"Modifier la rÃ©servation",saveChanges:"Enregistrer les modifications",cancelDialog:"Annuler",date:"Date",time:"Heure",numPassengers:"Nombre de passagers",vehicleType:"Type de vÃ©hicule",purpose:"Objectif",updated_msg:"RÃ©servation mise Ã  jour avec succÃ¨s",cancelConfirmTitle:"Annuler la rÃ©servation?",cancelConfirmDesc:"ÃŠtes-vous sÃ»r de vouloir annuler cette rÃ©servation? Cette action ne peut pas Ãªtre annulÃ©e.",confirmCancel:"Oui, annuler la rÃ©servation",searchPlaceholder:"Rechercher des rÃ©servations...",filterByStatus:"Filtrer par statut",allStatuses:"Tous les statuts",totalBookings:"Total des rÃ©servations",actions:"Actions",export:"Exporter les rÃ©servations",emptyTitle:"Aucune rÃ©servation",emptyDescription:"Vous n'avez pas encore fait de demande de rÃ©servation. CrÃ©ez votre premiÃ¨re rÃ©servation pour commencer.",emptyAction:"CrÃ©er une rÃ©servation",selectAll:"Tout sÃ©lectionner",deselectAll:"Tout dÃ©sÃ©lectionner",selected:"sÃ©lectionnÃ©(s)",bulkCancel:"Annuler la sÃ©lection",bulkExport:"Exporter la sÃ©lection",cancelling:"Annulation...",failedToCancel:"Ã‰chec de l'annulation de la rÃ©servation",failedToCancelSome:"Ã‰chec de l'annulation de certaines rÃ©servations",failedToUpdate:"Ã‰chec de la mise Ã  jour de la rÃ©servation"}};function Cs({language:i,userId:l}){const s=ks[i],{bookings:t,loading:a,refetch:c}=$e(l||"user:1"),[h,p]=x.useState(""),[n,w]=x.useState("all"),[m,y]=x.useState({from:"",to:""}),[o,r]=x.useState(new Set),[g,v]=x.useState(!1),u=async d=>{v(!0);const A=d.replace("booking:","");(await R.cancel(A)).success?(D.success(s.cancelled_msg),c()):D.error(s.failedToCancel),v(!1)},F=async()=>{v(!0);const d=Array.from(o).map(A=>{const L=A.replace("booking:","");return R.cancel(L)});try{await Promise.all(d),D.success(`${o.size} ${s.cancelled_msg}`),r(new Set),c()}catch{D.error(s.failedToCancelSome)}finally{v(!1)}},C=()=>{o.size===B.length?r(new Set):r(new Set(B.map(d=>d.id)))},b=d=>{const A=new Set(o);A.has(d)?A.delete(d):A.add(d),r(A)};if(a)return e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-10 w-48 bg-white/10 rounded-lg animate-pulse mb-2"}),e.jsx("div",{className:"h-5 w-64 bg-white/5 rounded animate-pulse"})]}),e.jsx(He,{rows:5})]})});const T=t.length,P=t.filter(d=>d.status==="pending").length,fe=t.filter(d=>d.status==="approved").length,we=t.filter(d=>d.status==="denied").length,je=t.filter(d=>d.status==="cancelled").length,B=t.filter(d=>{const A=d.destination.toLowerCase().includes(h.toLowerCase())||d.vehicleType.toLowerCase().includes(h.toLowerCase()),L=n==="all"||d.status===n;let J=!0;if(m.from&&m.to&&d.createdAt){const se=new Date(d.createdAt),Ne=new Date(m.from),ye=new Date(m.to);J=se>=Ne&&se<=ye}return A&&L&&J}).sort((d,A)=>{const L=new Date(d.createdAt||0).getTime();return new Date(A.createdAt||0).getTime()-L});return t.length===0?e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent mb-2",children:s.title}),e.jsx("p",{className:"text-gray-400",children:"View and manage your booking requests"})]}),e.jsx(S,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg",children:e.jsx(G,{icon:_,title:s.emptyTitle,description:s.emptyDescription,actionLabel:s.emptyAction,onAction:()=>D.info("Navigate to booking form")})})]})}):e.jsx("div",{className:"min-h-screen py-8 px-4",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent mb-2",children:s.title}),e.jsx("p",{className:"text-gray-400",children:"View and manage your booking requests"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[e.jsxs(S,{className:"p-4 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:s.totalBookings}),e.jsx("p",{className:"text-3xl font-bold text-white",children:T})]}),e.jsxs(S,{className:"p-4 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:s.pending}),e.jsx("p",{className:"text-3xl font-bold text-[#FFD700]",children:P})]}),e.jsxs(S,{className:"p-4 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:s.approved}),e.jsx("p",{className:"text-3xl font-bold text-green-500",children:fe})]}),e.jsxs(S,{className:"p-4 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:s.denied}),e.jsx("p",{className:"text-3xl font-bold text-red-500",children:we})]}),e.jsxs(S,{className:"p-4 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:s.cancelled}),e.jsx("p",{className:"text-3xl font-bold text-gray-400",children:je})]})]}),o.size>0&&e.jsx(S,{className:"p-4 border border-[#FFD700] bg-[#FFD700]/10 backdrop-blur-xl shadow-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-5 w-5 text-[#FFD700]"}),e.jsxs("span",{className:"text-white font-medium",children:[o.size," ",s.selected]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>re(B.filter(d=>o.has(d.id))),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),s.bulkExport]}),e.jsx(f,{variant:"destructive",size:"sm",onClick:F,disabled:g,className:"bg-red-600 hover:bg-red-700",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),s.cancelling]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),s.bulkCancel]})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>r(new Set),className:"text-white hover:bg-white/10",children:e.jsx(q,{className:"h-4 w-4"})})]})]})}),e.jsx(S,{className:"p-6 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[B.length>0&&e.jsx(f,{variant:"outline",size:"sm",onClick:C,className:"bg-white/10 border-white/20 text-white hover:bg-white/20 md:w-auto w-full",children:o.size===B.length?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),s.deselectAll]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),s.selectAll]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(k,{type:"text",placeholder:s.searchPlaceholder,value:h,onChange:d=>p(d.target.value),className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-gray-500 focus:border-[#FFD700]"})]}),e.jsxs(E,{value:n,onValueChange:d=>w(d),children:[e.jsxs(V,{className:"w-full md:w-48 bg-white/10 border-white/20 text-white focus:border-[#FFD700]",children:[e.jsx(We,{className:"h-4 w-4 mr-2 text-[#FFD700]"}),e.jsx(z,{children:n==="all"?s.allStatuses:n.charAt(0).toUpperCase()+n.slice(1)})]}),e.jsxs(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(N,{value:"all",className:"text-white hover:bg-white/10",children:s.allStatuses}),e.jsx(N,{value:"pending",className:"text-white hover:bg-white/10",children:s.pending}),e.jsx(N,{value:"approved",className:"text-white hover:bg-white/10",children:s.approved}),e.jsx(N,{value:"denied",className:"text-white hover:bg-white/10",children:s.denied}),e.jsx(N,{value:"cancelled",className:"text-white hover:bg-white/10",children:s.cancelled})]})]}),e.jsx(Ss,{value:m,onChange:y}),e.jsxs(f,{variant:"outline",className:"flex-1 bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 shadow-lg shadow-[#FFD700]/20",onClick:()=>re(B),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),s.export]})]})}),B.length===0?e.jsx(S,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg",children:e.jsx(G,{icon:oe,title:s.noBookings,description:"Try adjusting your search or filter criteria",secondaryActionLabel:"Clear Filters",onSecondaryAction:()=>{p(""),w("all"),y({from:"",to:""})}})}):e.jsx("div",{className:"grid gap-6",children:B.map(d=>e.jsx(S,{className:"p-6 border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:bg-white/10 transition-all group",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-start pt-1",children:e.jsx("button",{onClick:()=>b(d.id),className:"p-1 rounded hover:bg-white/10 transition-colors",children:o.has(d.id)?e.jsx(ne,{className:"h-5 w-5 text-[#FFD700]"}):e.jsx(le,{className:"h-5 w-5 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"h-6 w-6 text-[#FFD700]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s.dateTime}),e.jsxs("p",{className:"text-lg text-white font-medium",children:[d.date," at ",d.time]})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${d.status==="pending"?"bg-[#FFD700]/20 text-[#FFD700] border border-[#FFD700]/30":d.status==="approved"?"bg-green-500/20 text-green-500 border border-green-500/30":d.status==="denied"?"bg-red-500/20 text-red-500 border border-red-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:d.status.charAt(0).toUpperCase()+d.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 bg-white/5 p-4 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-5 w-5 text-[#FFD700]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s.destination}),e.jsx("p",{className:"text-white font-medium",children:d.destination})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s.passengers}),e.jsxs("p",{className:"text-white font-medium",children:[d.passengers," passengers"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s.vehicle}),e.jsx("p",{className:"text-white font-medium",children:d.vehicleType})]})]}),d.status==="pending"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ts,{booking:d,onUpdate:c,t:s,language:i}),e.jsx(As,{bookingId:d.id,onCancel:u,t:s,isCancelling:g})]})]})]})},d.id))})]})})}function Ts({booking:i,onUpdate:l,t:s,language:t}){const[a,c]=x.useState(!1),[h,p]=x.useState(i.date),[n,w]=x.useState(i.time),[m,y]=x.useState(i.destination),[o,r]=x.useState(i.passengers),[g,v]=x.useState(i.vehicleType),[u,F]=x.useState(i.purpose||""),C=async()=>{const b=i.id.replace("booking:","");(await R.update(b,{date:h,time:n,destination:m,passengers:o,vehicleType:g,purpose:u})).success?(D.success(s.updated_msg),l(),c(!1)):D.error(s.failedToUpdate)};return e.jsxs(Ke,{open:a,onOpenChange:c,children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"flex-1 bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90 shadow-lg shadow-[#FFD700]/20 border-0",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),s.edit]})}),e.jsxs(Xe,{className:"sm:max-w-[500px] bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(Ze,{children:e.jsx(Qe,{className:"text-white",children:s.editBooking})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"date",className:"text-white",children:s.date}),e.jsx(k,{id:"date",type:"date",value:h,onChange:b=>p(b.target.value),min:new Date().toISOString().split("T")[0],className:"bg-white/10 border-white/20 text-white"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"time",className:"text-white",children:s.time}),e.jsx(k,{id:"time",type:"time",value:n,onChange:b=>w(b.target.value),className:"bg-white/10 border-white/20 text-white"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"destination",className:"text-white",children:s.destination}),e.jsx(k,{id:"destination",value:m,onChange:b=>y(b.target.value),className:"bg-white/10 border-white/20 text-white"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"passengers",className:"text-white",children:s.numPassengers}),e.jsx(k,{id:"passengers",type:"number",value:o,onChange:b=>r(Number(b.target.value)),className:"bg-white/10 border-white/20 text-white"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"vehicleType",className:"text-white",children:s.vehicleType}),e.jsxs(E,{value:g,onValueChange:b=>v(b),children:[e.jsx(V,{className:"bg-white/10 border-white/20 text-white",children:e.jsx(z,{})}),e.jsxs(M,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsx(N,{value:"Sedan",className:"text-white hover:bg-white/10",children:"Sedan"}),e.jsx(N,{value:"SUV",className:"text-white hover:bg-white/10",children:"SUV"}),e.jsx(N,{value:"Minibus",className:"text-white hover:bg-white/10",children:"Minibus"}),e.jsx(N,{value:"Bus",className:"text-white hover:bg-white/10",children:"Bus"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"purpose",className:"text-white",children:s.purpose}),e.jsx(be,{id:"purpose",value:u,onChange:b=>F(b.target.value),className:"bg-white/10 border-white/20 text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>c(!1),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:s.cancelDialog}),e.jsx(f,{type:"button",onClick:C,className:"bg-gradient-to-r from-[#FFD700] to-[#FFA500] text-black hover:from-[#FFD700]/90 hover:to-[#FFA500]/90",children:s.saveChanges})]})]})]})}function As({bookingId:i,onCancel:l,t:s,isCancelling:t}){const a=()=>{l(i)};return e.jsxs(es,{children:[e.jsx(ss,{asChild:!0,children:e.jsx(f,{variant:"destructive",className:"flex-1 bg-red-600 hover:bg-red-700",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),s.cancelling]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),s.cancel]})})}),e.jsxs(ts,{className:"bg-black/95 backdrop-blur-xl border-white/10",children:[e.jsxs(as,{children:[e.jsx(rs,{className:"text-white",children:s.cancelConfirmTitle}),e.jsx(is,{className:"text-gray-400",children:s.cancelConfirmDesc})]}),e.jsxs(ls,{children:[e.jsx(ns,{className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:s.cancelDialog}),e.jsx(os,{onClick:a,className:"bg-red-600 hover:bg-red-700 text-white",children:s.confirmCancel})]})]})]})}function Ps({...i}){return e.jsx(De,{"data-slot":"sheet",...i})}function Bs({...i}){return e.jsx(Se,{"data-slot":"sheet-trigger",...i})}function Ls({...i}){return e.jsx(Te,{"data-slot":"sheet-portal",...i})}const ve=x.forwardRef(({className:i,...l},s)=>e.jsx(Fe,{ref:s,"data-slot":"sheet-overlay",className:H("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",i),...l}));ve.displayName="SheetOverlay";function Is({className:i,children:l,side:s="right",...t}){return e.jsxs(Ls,{children:[e.jsx(ve,{}),e.jsxs(ke,{"data-slot":"sheet-content",className:H("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",i),...t,children:[l,e.jsxs(Ce,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(q,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}const Es={en:{dashboard:"Dashboard",newBooking:"New Booking",myBookings:"My Bookings",driverView:"Driver View",logout:"Logout"},fr:{dashboard:"Tableau de bord",newBooking:"Nouvelle rÃ©servation",myBookings:"Mes rÃ©servations",driverView:"Vue conducteur",logout:"DÃ©connexion"}};function Vs({currentPage:i,setCurrentPage:l,userRole:s,userName:t,language:a,setLanguage:c,onLogout:h}){const p=Es[a],n=[];s==="admin"?(n.push({id:"dashboard",label:p.dashboard}),n.push({id:"booking",label:p.newBooking}),n.push({id:"my-bookings",label:p.myBookings})):s==="employee"?(n.push({id:"booking",label:p.newBooking}),n.push({id:"my-bookings",label:p.myBookings})):s==="driver"&&n.push({id:"driver",label:p.driverView});const w=()=>e.jsx("div",{className:"flex flex-col gap-2 p-4",children:n.map(m=>e.jsx("button",{onClick:()=>l(m.id),className:`px-4 py-3 rounded-lg text-left transition-colors ${i===m.id?"bg-[#FFD700] text-black":"text-white hover:bg-white/10"}`,children:m.label},m.id))});return e.jsx("nav",{className:"bg-black/80 backdrop-blur-xl text-white sticky top-0 z-50 border-b border-white/10 shadow-lg shadow-black/50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-xl flex items-center justify-center shadow-lg shadow-[#FFD700]/20",children:e.jsx("img",{src:"/images/SchoolLogo.png",alt:"ISD Logo",className:"w-6 h-6 object-contain"})}),e.jsx("span",{className:"text-xl font-semibold bg-gradient-to-r from-[#FFD700] to-white bg-clip-text text-transparent",children:"ISD Car Reservation"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[n.map(m=>e.jsx("button",{onClick:()=>l(m.id),className:`px-4 py-2 rounded-lg transition-colors ${i===m.id?"bg-[#FFD700] text-black":"text-white hover:bg-white/10"}`,children:m.label},m.id)),e.jsxs("button",{onClick:()=>c(a==="en"?"fr":"en"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:a.toUpperCase()})]}),e.jsxs(f,{onClick:h,variant:"outline",className:"border-[#FFD700] text-[#FFD700] hover:bg-[#FFD700] hover:text-black",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),p.logout]})]}),e.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(a==="en"?"fr":"en"),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20",children:e.jsx(Y,{className:"h-5 w-5"})}),e.jsxs(Ps,{children:[e.jsx(Bs,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"text-white",children:e.jsx(cs,{className:"h-6 w-6"})})}),e.jsx(Is,{side:"right",className:"bg-black text-white border-l border-white/10",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-xl flex items-center justify-center",children:e.jsx("img",{src:"/images/SchoolLogo.png",alt:"ISD Logo",className:"w-6 h-6 object-contain"})}),e.jsx("span",{children:"ISD Car Reservation"})]}),e.jsx(w,{}),e.jsx("div",{className:"mt-auto",children:e.jsxs(f,{onClick:h,variant:"outline",className:"w-full border-[#FFD700] text-[#FFD700] hover:bg-[#FFD700] hover:text-black",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),p.logout]})})]})})]})]})]})})})}var zs=(i,l,s,t,a,c,h,p)=>{let n=document.documentElement,w=["light","dark"];function m(r){(Array.isArray(i)?i:[i]).forEach(g=>{let v=g==="class",u=v&&c?a.map(F=>c[F]||F):a;v?(n.classList.remove(...u),n.classList.add(c&&c[r]?c[r]:r)):n.setAttribute(g,r)}),y(r)}function y(r){p&&w.includes(r)&&(n.style.colorScheme=r)}function o(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(t)m(t);else try{let r=localStorage.getItem(l)||s,g=h&&r==="system"?o():r;m(g)}catch{}},Ms=x.createContext(void 0),Rs={setTheme:i=>{},themes:[]},qs=()=>{var i;return(i=x.useContext(Ms))!=null?i:Rs};x.memo(({forcedTheme:i,storageKey:l,attribute:s,enableSystem:t,enableColorScheme:a,defaultTheme:c,value:h,themes:p,nonce:n,scriptProps:w})=>{let m=JSON.stringify([s,l,c,i,p,h,t,a]).slice(1,-1);return x.createElement("script",{...w,suppressHydrationWarning:!0,nonce:typeof window>"u"?n:"",dangerouslySetInnerHTML:{__html:`(${zs.toString()})(${m})`}})});const Os=({...i})=>{const{theme:l="system"}=qs();return e.jsx(ds,{theme:l,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...i})};async function Us(){try{const i=[{name:"Toyota Camry 2024",type:"Sedan",capacity:4,plateNumber:"ABC-1234",status:"available"},{name:"Ford Explorer",type:"SUV",capacity:7,plateNumber:"XYZ-5678",status:"available"},{name:"Mercedes Sprinter",type:"Minibus",capacity:15,plateNumber:"MNO-9012",status:"in-use"},{name:"School Bus Large",type:"Bus",capacity:30,plateNumber:"BUS-3456",status:"available"}];for(const t of i)await hs.create(t);const l=[{name:"John Smith",email:"j.smith@school.edu",phone:"+1-555-0101",department:"Mathematics",role:"employee"},{name:"Sarah Johnson",email:"s.johnson@school.edu",phone:"+1-555-0102",department:"Administration",role:"admin"},{name:"Michael Brown",email:"m.brown@school.edu",phone:"+1-555-0103",department:"Sports",role:"employee"},{name:"David Wilson",email:"d.wilson@school.edu",phone:"+1-555-0104",department:"Transport",role:"driver"},{name:"Emily Davis",email:"e.davis@school.edu",phone:"+1-555-0105",department:"Science",role:"employee"}];for(const t of l)await ms.create(t);const s=[{userId:"user:1",employeeName:"John Smith",department:"Mathematics",email:"j.smith@school.edu",phone:"+1-555-0101",date:"2025-11-10",time:"09:00",destination:"City Science Museum",passengers:15,vehicleType:"Minibus",purpose:"Field Trip",otherPurpose:"",status:"pending"},{userId:"user:1",employeeName:"Sarah Johnson",department:"Administration",email:"s.johnson@school.edu",phone:"+1-555-0102",date:"2025-11-12",time:"14:00",destination:"District Office",passengers:3,vehicleType:"Sedan",purpose:"Meeting",otherPurpose:"",status:"pending"},{userId:"user:3",employeeName:"Michael Brown",department:"Sports",email:"m.brown@school.edu",phone:"+1-555-0103",date:"2025-11-15",time:"08:00",destination:"Regional Sports Complex",passengers:20,vehicleType:"Bus",purpose:"Competition",otherPurpose:"",status:"pending"},{userId:"user:1",employeeName:"John Smith",department:"Mathematics",email:"j.smith@school.edu",phone:"+1-555-0101",date:"2025-11-08",time:"14:00",destination:"District Office",passengers:3,vehicleType:"Sedan",purpose:"Meeting",otherPurpose:"",status:"approved"}];for(const t of s)await R.create(t);return{success:!0,message:"Database seeded successfully"}}catch{return{success:!1,error:"Failed to seed database"}}}function _s(){const[i,l]=x.useState("login"),[s,t]=x.useState(null),[a,c]=x.useState(null),[h,p]=x.useState("en"),[n,w]=x.useState(!1),[m,y]=x.useState(!0);x.useEffect(()=>{(async()=>{localStorage.getItem("db_seeded")||(await Us(),localStorage.setItem("db_seeded","true")),w(!0)})()},[]),x.useEffect(()=>{if(!n)return;(async()=>{try{const{data:{session:F},error:C}=await K.auth.getSession();if(C){y(!1);return}if(F?.access_token){const b=await U.getSession(F.access_token);b.success&&b.user&&(c(F.access_token),t(b.user),b.user.role==="admin"?l("dashboard"):b.user.role==="employee"?l("booking"):b.user.role==="driver"&&l("driver"))}}catch{}y(!1)})();const{data:{subscription:u}}=K.auth.onAuthStateChange(async(F,C)=>{F==="SIGNED_OUT"?(t(null),c(null),l("login")):(F==="TOKEN_REFRESHED"&&C||C)&&c(C.access_token)});return()=>{u.unsubscribe()}},[n]);const o=async v=>{try{const u=await U.getSession(v);u.success&&u.user&&(c(v),t(u.user),localStorage.setItem("access_token",v),u.user.role==="admin"?l("dashboard"):u.user.role==="employee"?l("booking"):u.user.role==="driver"&&l("driver"))}catch{}},r=async()=>{try{const{error:v}=await K.auth.signOut()}catch{}t(null),c(null),l("login")},g=()=>{switch(i){case"login":return e.jsx(he,{onLogin:o,onSwitchToSignup:()=>l("signup"),language:h,setLanguage:p});case"signup":return e.jsx(ws,{onSignup:o,onSwitchToLogin:()=>l("login"),language:h});case"dashboard":return e.jsx(xs,{language:h});case"booking":return e.jsx(ys,{language:h,user:s});case"driver":return e.jsx(Ds,{language:h});case"my-bookings":return e.jsx(Cs,{language:h,userId:s?.id});default:return e.jsx(he,{onLogin:o,onSwitchToSignup:()=>l("signup"),language:h})}};return!n||m?e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center relative overflow-hidden",children:[e.jsx($,{}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#FFD700] border-r-transparent"}),e.jsx("p",{className:"mt-4 text-white",children:"Initializing..."})]})]}):e.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[e.jsx($,{}),e.jsxs("div",{className:"relative z-10",children:[s&&i!=="login"&&i!=="signup"&&e.jsx(Vs,{currentPage:i,setCurrentPage:l,userRole:s.role,userName:s.name,language:h,setLanguage:p,onLogout:r}),g()]}),e.jsx(Os,{})]})}ps.createRoot(document.getElementById("root")).render(e.jsx(_s,{}));
